@page "/Admin/Product/{ProductId:int}"
@layout AdminLayout
@using SanGiaoDich_BrotherHood.Shared.Models
@using SanGiaoDich_BrotherHood.Shared.Dto
@using System.Text.Json
@using System.Text
@inject HttpClient httpclient
@inject IJSRuntime JSRuntime
@inject NavigationManager Navigation
<style>
    .info-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 16px;
    }

        .info-table th,
        .info-table td {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: left;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .info-table th {
            background-color: #28a745;
            color: white;
            font-weight: bold;
        }

        .info-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .info-table tbody tr:hover {
            background-color: #f1f1f1;
        }

        .info-table td {
            vertical-align: middle;
        }

    .info-avatar img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
    }

    /* Điều chỉnh hình ảnh để chúng không bị kéo dãn và khoảng cách hợp lý */
    .product-images img {
        max-width: 80px; /* Giảm kích thước ảnh */
        height: auto;
        border-radius: 10px;
        margin-right: 10px;
        margin-bottom: 10px; /* Khoảng cách dưới các ảnh */
    }

    .product-images {
        display: flex;
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: 10px; /* Khoảng cách giữa các ảnh */
    }

    .info-avatar {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 10px;
    }

    /* Nút liên hệ ở dưới cùng */
    .contact-btns button {
        width: 100%;
        margin-bottom: 10px;
    }
</style>

<div class="container">
    <table class="info-table">
        <thead>
            <tr>
                <th colspan="2" class="text-center">Thông tin chi tiết sản phẩm</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Hình ảnh</th>
                <td>
                    <div class="product-images">
                        @if (images != null && images.Any())
                        {
                            <img src="@images.First().Image" class="img-fluid" alt="Ảnh chính">
                            @foreach (var item in images.Skip(1))
                            {
                                <img src="@item.Image" class="img-fluid" alt="Ảnh phụ">
                            }
                        }
                        else
                        {
                            <div>Không có hình ảnh.</div>
                        }
                    </div>
                </td>
            </tr>
            <tr>
                <th>Tên sản phẩm</th>
                <td>@product?.Name</td>
            </tr>
            <tr>
                <th>Giá</th>
                <td><span class="text-success">@product?.Price.ToString("N0") VND</span></td>
            </tr>
            <tr>
                <th>Loại sản phẩm</th>
                <td>@categoryName</td>
            </tr>
            <tr>
                <th>Ngày đăng</th>
                <td>@(product?.StartDate?.ToString("dd/MM/yyyy") ?? "Chưa xác định")</td>
            </tr>
            <tr>
                <th>Thông tin người bán</th>
                <td>
                    <div class="info-avatar">
                        <img src="@user?.ImageAccount" alt="Người bán">
                    </div>
                    <div><strong>@user?.FullName</strong></div>
                    <div><i class="bi bi-telephone-forward"></i> Số điện thoại: @user?.PhoneNumber</div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

@code {
    [Inject] NavigationManager NavigationManager { get; set; }

    private void NavigateToProductDetail(int productId)
    {
        NavigationManager.NavigateTo($"/ChiTietSanPham/{productId}?forceReload=true", true);
    }
}
