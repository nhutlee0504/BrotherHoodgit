@page "/text"
@inject IJSRuntime JSRuntime

<!-- Tải CSS và JS cho Quill -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

<h3>Trình soạn thảo Quill</h3>

<!-- Nút để khởi tạo Quill -->
<button @onclick="InitializeQuill" class="btn btn-primary">Khởi tạo Quill</button>

<!-- Div để Quill render vào -->
<div id="editor-container" style="height: 300px; margin-top: 20px;"></div>

<!-- Thêm input để lấy nội dung -->
<textarea id="editor-output" style="width: 100%; height: 200px; margin-top: 20px;" readonly></textarea>

@code {
    private async Task InitializeQuill()
    {
        // Gọi JavaScript để khởi tạo Quill
        await JSRuntime.InvokeVoidAsync("eval", @"
            var quill = new Quill('#editor-container', {
                theme: 'snow',
                modules: {
                    toolbar: [
                        [{ 'header': '1' }, { 'header': '2' }, { 'font': [] }],
                        [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                        ['bold', 'italic', 'underline'],
                        ['link'],
                        [{ 'align': [] }],
                        ['image'],
                        ['blockquote', 'code-block'],
                    ]
                }
            });

            // Thêm sự kiện lấy nội dung từ Quill
            quill.on('text-change', function() {
                var content = quill.root.innerHTML;
                document.getElementById('editor-output').value = content;
            });
        ");
    }
}
