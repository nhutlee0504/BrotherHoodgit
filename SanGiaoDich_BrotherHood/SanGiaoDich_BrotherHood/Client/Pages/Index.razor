@page "/"
@using SanGiaoDich_BrotherHood.Shared.Models
@inject HttpClient httpClient
@inject NavigationManager NavigationManager
<style>

    .banner, .features-card, .product-grid, .content-card {
        width: 100%;
        margin: 0 auto;
        padding: 0;
    }

    /* Carousel */
    .carousel-item img {
        width: 100%;
        height: auto;
    }

    /* Feature section */
    .features-card {
        width: 100%; 
        margin: 20px auto; 
        background-color: #fff;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .features {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin: 0;
        padding: 20px 0;
        background-color: #fff;
    }

    .feature-item {
        display: flex;
        align-items: center;
        border-radius: 8px;
        padding: 15px;
        text-align: left; 
    }

    .feature-item i {
        font-size: 36px;
        margin-right: 15px;   
    }

    .feature-text p {
        font-weight: bold;
        margin: 0;
        color: #333;
    }

    .feature-text span {
        display: block;
        font-size: 14px;
        color: #555;
    }

   
    .load-more {
        text-align: center;
        margin-top: 20px;
    }

    .load-more a {
        display: inline-block;
        font-size: 18px;
        color: #007bff;
        text-decoration: none;
        margin-bottom: 10px; 
    }

    .load-more i {
        display: block; 
        font-size: 24px;
        color: #007bff;
    }

</style>
<div class="row">
    <div class="col-md-12">
        <section class="banner">
            <!-- Carousel -->
            <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <!-- Image with no mask -->
                        <div class="bg-image">
                            <img src="/AnhGiaoDien/banner1.png" class="img-fluid w-100" alt="Logo">
                        </div>
                    </div>
                    <div class="carousel-item">
                        <!-- Image with no mask -->
                        <div class="bg-image">
                            <img src="/AnhGiaoDien/banner1.png" class="img-fluid w-100" alt="Logo">
                        </div>
                    </div>
                    <div class="carousel-item">
                        <!-- Image with no mask -->
                        <div class="bg-image">
                            <img src="/AnhGiaoDien/banner1.png" class="img-fluid w-100" alt="Logo">
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
           
        </section>
    </div>
    <!-- Features section inside a card -->
    <div class="container">
        <div class="card features-card">
            <div class="row justify-content-center">
                <div class="col-md-3 col-sm-6 d-flex justify-content-center feature-item text-center">
                    <i class="fas fa-shopping-cart"></i>
                    <div class="feature-text">
                        <p>Miễn phí mua sắm</p>
                        <span>Mua sắm thỏa sức</span>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6  d-flex justify-content-center feature-item text-center">
                    <i class="fas fa-exchange-alt"></i>
                    <div class="feature-text">
                        <p>Dễ dàng giao dịch</p>
                        <span>Giao dịch nhanh chóng</span>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6  d-flex justify-content-center feature-item text-center">
                    <i class="fas fa-lock"></i>
                    <div class="feature-text">
                        <p>Bảo mật cao</p>
                        <span>Các thông tin cá nhân được bảo mật tuyệt đối</span>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6  d-flex justify-content-center feature-item text-center">
                    <i class="fas fa-wallet"></i>
                    <div class="feature-text">
                        <p>Ví điện tử</p>
                        <span>Hợp hơn khi sở hữu ví tại hệ thống</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

   

</div>
<div class="container-fluid banner-advertisement mt-4 mb-4">
    <div class="row">
        <div class="col-12 p-0">
            <div class="banner-image">
                <img src="/AnhGiaoDien/nhung-hinh-anh-ve-mua-he_044801610.jpg" alt="Advertisement" class="img-fluid w-100">
                <div class="banner-overlay fade-in">
                    <h6 class="banner-title" style="font-size: 1.2rem;">🎉 Chào mừng đến với chương trình khuyến mãi mùa hè của chúng tôi! Đừng bỏ lỡ cơ hội nhận 1 lượt miễn phí đăng bài khi bạn tham gia. Đây là thời điểm tuyệt vời để quảng bá sản phẩm của bạn và tiếp cận với nhiều khách hàng hơn. Đăng ngay để nhận được nhiều ưu đãi hấp dẫn, cùng những bất ngờ đang chờ đón bạn!</h6>
                    <p class="banner-text" style="font-size: 0.9rem;">👉 Đăng ngay và khám phá thêm nhiều ưu đãi khác tại <a href="/promo-link" class="text-success">đây</a>!</p>
                    <a href="/promo-link" class="btn btn-light banner-btn" style="font-size: 0.9rem;">Đăng ngay</a>
                </div>


            </div>
        </div>
    </div>
</div>


@code {


    private List<Product> products = new List<Product>();
    private Dictionary<int, List<string>> productImages = new Dictionary<int, List<string>>();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            products = await httpClient.GetFromJsonAsync<List<Product>>("api/product/GetAllProduct");
            productImages = new Dictionary<int, List<string>>();

            foreach (var product in products)
            {
                var images = await httpClient.GetFromJsonAsync<List<ImageProduct>>($"api/ImageProduct/GetImageProduct?id={product.IDProduct}");
                productImages[product.IDProduct] = images?.Select(img => img.Image).ToList() ?? new List<string>();
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching products or images: {ex.Message}");
        }

    }
}
<div class="row d-flex justify-content-center container-fluid g-3">
    @foreach (var product in products)
    {
        <div class="col-md-3 col-6 mb-4 d-flex">
            <a href="@($"/ChiTietSanPham/{product.IDProduct}")" class="card shadow" style="border-radius: 25px; display: flex; flex-direction: column; height: 100%; border:none; text-decoration: none; color: inherit;">
                @if (productImages.ContainsKey(product.IDProduct) && productImages[product.IDProduct].Any())
                {
                    var firstImage = productImages[product.IDProduct].FirstOrDefault();

                    if (!string.IsNullOrEmpty(firstImage))
                    {
                        <img class="card-img-top p-3" style="border-radius: 25px;" src="/AnhSanPham/@firstImage" alt="@product.Name" />
                    }
                    else
                    {
                        <img class="card-img-top p-3" style="border-radius: 25px;" src="/AnhSanPham/default.png" alt="No Image Available" />
                    }
                }
                else
                {
                    <img class="card-img-top p-3" style="border-radius: 25px;" src="/AnhSanPham/default.png" alt="No Image Available" />
                }

                <div class="card-body">
                    <h5 class="fs-5" style="font-weight:bolder">
                        <span class="badge text-bg-success" style="background-color: green; padding: 5px 10px;">
                            <i class="bi bi-shield-check"></i> Đối tác
                        </span>
                        @product.Name
                    </h5>
                    <p class="price" style="color:green; font-weight:bolder">@product.Price.ToString("N0") VND</p>
                    <div class="row">
                        <div class="col-md-6 col-6" style="font-style:italic">
                            <i class="bi bi-geo-alt"></i> Cần Thơ
                        </div>
                        <div class="col-md-6 col-6 d-flex justify-content-end" style="color:blue; font-weight:bolder; text-decoration-line:underline">
                            @product.StartDate?.ToString("dd/MM/yyyy")
                        </div>
                    </div>
                </div>
            </a>
        </div>

    }
</div>
<div class="load-more">
    <a href="#">Xem thêm</a>
    <i class='far fa-arrow-alt-circle-down'></i>
</div>
<dib class="row">
    <div class="col-md-12">
        <div class="card mt-3 mb-5" style="border:none;">
            <div class="card-body">
                <h1>BrothersHood - Kênh Mua Bán, Rao Vặt Trực Tuyến Hàng Đầu</h1>
                <p>BrothersHood chính thức gia nhập thị trường Việt Nam vào đầu năm 2012, với mục tiêu mang đến cho bạn một nền tảng rao vặt trung gian, kết nối người mua với người bán qua những giao dịch đơn giản, tiện lợi, nhanh chóng và an toàn, đem lại hiệu quả đáng ngạc nhiên.</p>
                <p>Đến nay, BrothersHood tự hào là website rao vặt được ưa chuộng hàng đầu tại Việt Nam. Hàng ngàn món hời từ bất động sản, nhà cửa, xe cộ, đồ điện tử, thú cưng, vật dụng cá nhân, đến tìm việc làm, thông tin tuyển dụng, và các dịch vụ - du lịch được đăng tin, rao bán trên BrothersHood.</p>
                <p>Với BrothersHood, bạn có thể dễ dàng mua bán, trao đổi bất cứ loại mặt hàng nào, từ đồ cũ đến đồ mới, trong nhiều lĩnh vực khác nhau.</p>
            </div>
        </div>

    </div>
</dib>
<script>
     window.addEventListener('load', function() {
            document.querySelector('.banner-overlay').classList.add('fade-in');
    });

</script>
